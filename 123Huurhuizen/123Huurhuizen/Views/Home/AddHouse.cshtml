<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"]</title>
</head>
<body>
    <h1>Voer gegevens in:</h1>
    <form onsubmit="return validateForm()" enctype="multipart/form-data">
        <label for="location">Locatie:</label>
        <input type="text" id="location" name="location" required><br><br>

        <!-- Verborgen inputveld voor tijd -->
        <input type="hidden" id="time" name="time">

        <label for="date">Datum:</label>
        <input type="date" id="date" name="date" required><br><br>

        <label for="price">Prijs:</label>
        <input type="text" id="price" name="price"><br><br>

        <!-- Bestandsinvoerveld voor het uploaden van één foto -->
        <label for="photo">Foto uploaden:</label>
        <input type="file" id="photo" name="photo" accept=".png, .jpg" onchange="displaySelectedFile(this.files[0])"><br><br>

        <!-- Container voor weergave van geselecteerde foto's -->
        <div id="selectedFiles"></div><br><br>

        <input type="submit" value="Verzenden">
    </form>

    <script>
        // JavaScript voor validatie en instellen van de tijd
        function validateForm() {
            var locationInput = document.getElementById("location").value;
            if (locationInput.trim() === "") {
                alert("Voer een locatie in.");
                return false;
            }

            // Tijdstip instellen op het huidige tijdstip
            var currentTime = new Date();
            document.getElementById("time").value = currentTime.toISOString(); // Zet de tijd in ISO-formaat

            // Datumbeperking: minimaal vandaag
            var dateInput = document.getElementById("date");
            dateInput.min = currentTime.toISOString().split("T")[0]; // Alleen de datum, geen tijd

            return true;
        }

        // JavaScript om de geselecteerde foto weer te geven
        function displaySelectedFile(file) {
            var selectedFilesDiv = document.getElementById("selectedFiles");
            var fileName = file.name;
            var fileExtension = fileName.split('.').pop(); // krijg de bestandsextensie

            // Controleer of de extensie geldig is
            if (fileExtension !== 'png' && fileExtension !== 'jpg') {
                alert("Alleen .png en .jpg bestanden zijn toegestaan.");
                return;
            }

            // Maak een paragrafelement om de bestandsnaam weer te geven
            var fileElement = document.createElement("p");
            fileElement.textContent = fileName;

            // Voeg een 'x' toe om de foto te verwijderen
            var removeButton = document.createElement("button");
            removeButton.textContent = "x";
            removeButton.onclick = function () {
                selectedFilesDiv.removeChild(fileElement);
            };

            // Voeg het 'x'-knopje toe aan het paragrafelement
            fileElement.appendChild(removeButton);

            // Voeg het paragrafelement toe aan de container voor geselecteerde foto's
            selectedFilesDiv.appendChild(fileElement);
        }
    </script>
</body>
</html>
